{%extends 'base.html'%}
{% load static %}
{%block content%}
    <div class="dashboard-container" style="margin-top: 80px;">
        <!-- PAGE HEADER -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1><i class="fas fa-chart-bar"></i> Reports & Analytics</h1>
                <p>Comprehensive insights into your operations</p>
            </div>
            <div class="header-right">
                <div class="current-time" id="currentTime">--:-- --</div>
                <div class="current-date" id="currentDate">--- --, ----</div>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <div class="dashboard-main">
            <!-- REPORTS GRID -->
            <div class="reports-grid">
                <!-- Food Distribution -->
                <div class="report-card">
                    <div class="report-header">
                        <h3><i class="fas fa-utensils"></i> Food Distribution</h3>
                        <span class="report-period">Last 30 Days</span>
                    </div>
                    <div class="report-content">
                        <div class="report-stat">
                            <span class="stat-number">1,247</span>
                            <span class="stat-label">Meals Distributed</span>
                        </div>
                        <div class="report-chart">
                            <!-- Simple CSS Bar Chart -->
                            <div class="simple-bar-chart">
                                <div class="bar" style="height: 40%;" title="Week 1"></div>
                                <div class="bar" style="height: 60%;" title="Week 2"></div>
                                <div class="bar" style="height: 80%;" title="Week 3"></div>
                                <div class="bar" style="height: 50%;" title="Week 4"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Donor Engagement -->
                <div class="report-card">
                    <div class="report-header">
                        <h3><i class="fas fa-users"></i> Donor Engagement</h3>
                        <span class="report-period">This Month</span>
                    </div>
                    <div class="report-content">
                        <div class="report-stat">
                            <span class="stat-number">156</span>
                            <span class="stat-label">Active Donors</span>
                        </div>
                        <div class="report-chart">
                            <!-- Simple CSS Pie Chart representation -->
                            <div class="simple-pie-chart"
                                style="background: conic-gradient(var(--primary) 70%, #eee 0);">
                                <span class="pie-label">70%</span>
                            </div>
                            <p style="text-align:center; font-size: 0.8rem; margin-top:5px;">Returning Donors</p>
                        </div>
                    </div>
                </div>

                <!-- Pickup Efficiency -->
                <div class="report-card">
                    <div class="report-header">
                        <h3><i class="fas fa-truck"></i> Pickup Efficiency</h3>
                        <span class="report-period">Weekly</span>
                    </div>
                    <div class="report-content">
                        <div class="report-stat">
                            <span class="stat-number">95%</span>
                            <span class="stat-label">On-Time Pickups</span>
                        </div>
                        <div class="report-chart">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 95%;"></div>
                            </div>
                            <p style="text-align:center; font-size: 0.8rem; margin-top:5px;">Target: 90%</p>
                        </div>
                    </div>
                </div>

                <!-- Impact Report -->
                <div class="report-card">
                    <div class="report-header">
                        <h3><i class="fas fa-dollar-sign"></i> Community Impact</h3>
                        <span class="report-period">Monthly</span>
                    </div>
                    <div class="report-content">
                        <div class="report-stat">
                            <span class="stat-number">2,500</span>
                            <span class="stat-label">People Helped</span>
                        </div>
                        <div class="report-chart">
                            <div class="simple-trend-line">
                                <svg viewBox="0 0 100 50">
                                    <path d="M0,50 L20,40 L40,45 L60,20 L80,25 L100,5" fill="none"
                                        stroke="var(--primary)" stroke-width="3" />
                                </svg>
                            </div>
                            <p style="text-align:center; font-size: 0.8rem; margin-top:5px;">Growing Trend</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- EXPORT OPTIONS -->
            <div class="export-section">
                <h3>Export Reports</h3>
                <div class="export-buttons">
                    <button class="btn btn-primary" onclick="window.print()">
                        <i class="fas fa-file-pdf"></i> Print / Save PDF
                    </button>
                    <button class="btn btn-secondary" onclick="alert('Export to Excel feature coming soon!')">
                        <i class="fas fa-file-excel"></i> Export Excel
                    </button>
                </div>
            </div>
        </div>

        <style>
            /* internal styles for simple visuals */
            /* .simple-bar-chart {
                display: flex;
                align-items: flex-end;
                justify-content: space-around;
                height: 100px;
                width: 100%;
                background: rgba(255, 255, 255, 0.5);
                border-radius: 8px;
                padding: 5px;
            }

            .bar {
                width: 15%;
                background: var(--primary);
                border-radius: 4px 4px 0 0;
                opacity: 0.8;
                transition: height 0.3s;
            }

            .bar:hover {
                opacity: 1;
            }

            .simple-pie-chart {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                margin: 0 auto;
                position: relative;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .pie-label {
                background: white;
                padding: 5px;
                border-radius: 50%;
                font-size: 0.8rem;
                font-weight: bold;
            }

            .progress-bar-container {
                width: 100%;
                height: 12px;
                background: #eee;
                border-radius: 6px;
                margin-top: 20px;
                overflow: hidden;
            }

            .progress-bar {
                height: 100%;
                background: var(--primary);
                border-radius: 6px;
            }

            .simple-trend-line svg {
                width: 100%;
                height: 60px;
            } */
        </style>

        <script src="ngo_dashboard.js"></script>
        <script>
            // Initialize time display
            function updateTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('en-US', {
                    hour12: true,
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                const dateString = now.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                document.getElementById('currentTime').textContent = timeString;
                document.getElementById('currentDate').textContent = dateString;
            }

            updateTime();
            setInterval(updateTime, 1000);
        </script>
    </div>
{%endblock%}