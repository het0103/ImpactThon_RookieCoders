<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <title>Login</title>
</head>

<body>
  <header class="sticky-header">
    <div class="logo">
      <div class="brand">NourishNet</div>
    </div>

    <nav class="navbar">
      <a href="index.html">HOME</a>
      <a href="login.html" class="active">LOGIN</a>
      <a href="register.html">REGISTER</a>
      <a href="about.html">ABOUT</a>
    </nav>
  </header>
  <br>
  <div class="auth-page">
    <section class="auth-section">
      <div class="login">
        <form id="loginForm" class="login_form">
          <h1 class="login_title">Welcome Back</h1>

          <div class="login__box">
            <label class="login_label">Email</label>
            <input type="email" id="email" placeholder="Enter Email" required>
          </div>

          <div class="login__box">
            <label class="login_label">Password</label>
            <input type="password" id="password" placeholder="Enter Password" required>
          </div>

          <button type="submit" class="login__button">Login</button>

          <div class="login__register">
            Donâ€™t have an account?
            <a href="register.html">Register</a>
          </div>
        </form>
      </div>
    </section>
  </div>

  <script>
    document.getElementById('loginForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      // Simple client-side simulation
      // In a real app, this would be an API call

      const users = JSON.parse(localStorage.getItem('users')) || [];
      const user = users.find(u => u.email === email && u.password === password);

      if (user) {
        // Save current user session
        localStorage.setItem('currentUser', JSON.stringify(user));

        // Redirect based on role
        if (user.role === 'ngo') {
          window.location.href = 'ngo_dashboard.html';
        } else {
          window.location.href = 'donor_home.html'; // Assuming donor dashboard is here or index
        }
      } else {
        // Admin/Demo backdoor
        if (email === 'admin@nourishnet.org' && password === 'admin') {
          localStorage.setItem('currentUser', JSON.stringify({ name: 'Admin NGO', role: 'ngo' }));
          window.location.href = 'ngo_dashboard.html';
          return;
        }
        if (email === 'donor@test.com' && password === 'donor') {
          localStorage.setItem('currentUser', JSON.stringify({ name: 'Test Donor', role: 'donor' }));
          window.location.href = 'donor_home.html';
          return;
        }

        alert('Invalid credentials. Try admin@nourishnet.org / admin');
      }
    });

    // Check if already logged in
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (currentUser) {
      // Optional: auto-redirect? 
      // window.location.href = currentUser.role === 'ngo' ? 'ngo_dashboard.html' : 'donor_home.html';
    }
  </script>

</body>

</html>